(function(b){var g={init:function(){this.list=b(".portfolio_list");this.pagination=b(".portfolio_list_pagination");this.lis=this.list.find("li");this.number_of_visible=3;this.number_of_pages=Math.ceil(this.lis.length/this.number_of_visible);this.active_page=1;this.next_button=this.pagination.find(".next");this.prev_button=this.pagination.find(".prev");this.pagination_counter_current=this.pagination.find(".page .current");this.window=b(window);this.page_wrap=b(".page_wrap");this.indicator_list=b(".portfolio_list_indicator");
this.article_indicator=b(".article_active_indicator");this.connect_link=this.indicator_list.find(".connect_link");this.initial_hash=window.location.hash?!0:!1;this.correct_indicator_after_width();this.setIndicatorTop();this.bindEvents()},bindEvents:function(){var a=this;this.next_button.on("click.lumi_testimonials",function(){a.active_page<a.number_of_pages&&a.changePage(a.active_page+1)});this.prev_button.on("click.lumi_testimonials",function(){1<a.active_page&&a.changePage(a.active_page-1)});this.window.on("resize",
function(){a.correct_indicator_after_width();a.setIndicatorTop()})},changePage:function(a){var c=this,d=this.lis.filter(".visible");d.fadeOut(300,function(){d.removeClass("visible");var b=(a-1)*c.number_of_visible,e=c.lis.slice(b,b+c.number_of_visible);e.fadeIn(300,function(){e.addClass("visible");c.initial_hash&&c.checkShowHideIndicators(!1,!0)&&c.setIndicatorTop()});c.active_page=a;c.pagination_counter_current.html(c.active_page)});this.checkShowHideIndicators(a)},correct_indicator_after_width:function(){if("mobile"!==
window.lumi_responsive_current){var a="desktop"===window.lumi_responsive_current?0.04:0.06,a=this.page_wrap.width()*a-30;this.connect_link.width(a)}},setIndicatorTop:function(){if("mobile"!==window.lumi_responsive_current){var a=this.lis.filter(".active").position();this.indicator_list.css("top",a.top)}},checkShowHideIndicators:function(a,c){a=a?a:this.active_page;var d=this.lis.index(this.lis.filter(".active"))+1,d=d>(a-1)*this.number_of_visible&&d<=a*this.number_of_visible?!0:!1;if(c)return d;d?
this.indicator_list.add(this.article_indicator).removeClass("list_hidden"):this.indicator_list.add(this.article_indicator).addClass("list_hidden")},switchActive:function(a){a=b(a);this.lis.filter(".active").removeClass("active");a.parent("li").addClass("active");this.checkShowHideIndicators();this.setIndicatorTop()}},h={init:function(a){this.pagination_instance=a;this.client_content=b(".portfolio_client_content");this.template_file=this.client_content.data("hb-template-name");this.list=b(".portfolio_list");
this.list.find("a").each(function(){var a=b(this);a.attr("href",a.attr("href")+"?json")});this.bindEvents();this.checkForHash()},bindEvents:function(){var a=function(a){a.preventDefault();a=b(this);c.loadClient(a.attr("href"),b(this),a.data("slug"))},c=this;if("mobile"!==window.lumi_responsive_current)this.list.on("click.portfolio_switching","a",a);b(document).on("lumi_responsive_change",function(b){"mobile"===b.new_width&&c.list.off("click.portfolio_switching");if("mobile"===b.old_width)c.list.on("click.portfolio_switching",
"a",a)})},checkForHash:function(){var a=window.location.hash;a&&(a=a.substr(1),a=this.list.find("a").filter("[data-slug="+a+"]"),0<a.length&&("mobile"===window.lumi_responsive_current?window.location=a.attr("href"):this.loadClient(a.attr("href"),a,a.data("slug"))))},loadClient:function(a,c,d){this.showHidePreloader("show",c);var f=b.ajax({dataType:"json",url:a}),e=this;f.done(function(a){e.processTemplate(a);e.pagination_instance.switchActive(c);e.showHidePreloader("hide",c);window.location.hash=
d});f.fail(function(){alert("N\u011bco nezafungovalo spr\u00e1vn\u011b, portfolio se otev\u0159e v nouzov\u00e9m re\u017eimu a moc n\u00e1m pom\u016f\u017eete, pokud n\u00e1m o tom nap\u00ed\u0161ete.");window.location=a})},showHidePreloader:function(a,c){var b=c.find(".preloader");"show"===a?b.addClass("active"):b.removeClass("active")},processTemplate:function(a){var b=Handlebars.templates[this.template_file](a),d=this;this.client_content.fadeOut(300,function(){d.client_content.html(b).fadeIn(300);
d.functionsOnNewDomReady()})},functionsOnNewDomReady:function(){"function"===typeof window.picturefill&&window.picturefill();"undefined"!==typeof addthis&&"function"===typeof addthis.toolbox&&(addthis.toolbox("#addthis_toolbox"),addthis.counter("#atcounter"));b.event.trigger("lumiart_portfolio_change_loaded")}};b(document).ready(function(){var a=Object.create(g);a.init();h.init(a)})})(jQuery);
